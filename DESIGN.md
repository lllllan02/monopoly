# 大富翁（Monopoly）联机游戏玩法设计文档

## 1. 游戏概述
本作是一款基于经典大富翁规则的联机益智策略游戏。玩家通过投掷骰子在棋盘上移动，进行土地购买、房屋建造、租金收取及随机事件处理。目标是通过商业经营使对手破产，最终成为棋盘上的唯一资产持有者。

## 2. 核心目标
*   **获胜条件：** 游戏中除一人外，其余所有玩家均因资金归零而破产。
*   **失败条件：** 玩家无法支付租金、税款或罚金，且通过抵押资产后仍无法偿还债务，即宣告破产并出局。

## 3. 游戏基础规则与自定义设置
### 3.1 初始准备与配置
本作支持高度自定义，房主在创建房间时可以根据需求调整以下参数：
*   **玩家人数：** 理论上不设上限（视服务器性能及棋盘大小而定），支持 2 人以上联机。
*   **初始资源：** 每位玩家获得的初始资金可自定义（默认为 $1500）。
*   **骰子规则：** 可设置骰子面数（如 6 面、12 面等）及骰子数量。
*   **棋盘规模：** 支持不同大小的棋盘配置（如标准 40 格、精简版或扩展版）。
*   **起始位置：** 所有玩家的代表角色初始停留在“起点（GO）”格。

### 3.2 回合逻辑
游戏采用回合制。每回合玩家可以执行以下操作：
1.  **投掷骰子：** 自动或点击投掷两个骰子，根据点数之和移动。
2.  **触发格子事件：** 移动结束落位后，根据格子类型触发相应逻辑。
3.  **连续行动：** 若投掷出“双数（Doubles）”，玩家可在当前操作结束后再次获得一个回合。若连续三次投出双数，则被视为“超速”直接送往监狱。

## 4. 棋盘格子分类与玩法
根据棋盘配置的不同，格子的总数和排布会有所变化。以标准 40 格棋盘为例，分为以下几类：

### 4.1 房地产（Property）
*   **普通土地：** 分为不同颜色组。
    *   **购买：** 玩家停留于无主土地时，可按标价购买。
    *   **租金：** 其他玩家停留于已有主人的土地时，需支付租金。
    *   **建设：** 当玩家集齐同颜色组的所有土地后，可开始建造房屋（House）和旅馆（Hotel），以大幅提升租金。
*   **公共设施（电厂/水厂）：** 租金由掷出的骰子点数乘以固定倍数决定。
*   **车站：** 租金根据玩家拥有的车站数量翻倍。

### 4.2 功能性格子
*   **起点（GO）：** 每次经过或停留在该处，玩家领取预设的薪资（如默认为 $200，可配置）。
*   **监狱（Jail）：** 
    *   **仅仅经过：** 视为“路过”，无惩罚。
    *   **入狱：** 停留在“入狱”格或抽到相关卡片后进入。入狱期间不可移动，需支付罚款或投出双数方可出狱。
*   **机会/大众宝库（Chance/Community Chest）：** 随机抽取一张卡片，可能获得金钱奖励、被迫移动或面临罚款。
*   **税收格（Income Tax/Luxury Tax）：** 必须向银行支付固定金额或资产比例。

### 4.3 扩展特殊地块（后续添加计划）
为了增强游戏的可玩性与策略深度，后续将引入以下特殊功能地块：
*   **资源类：**
    *   **银行 (Bank)：** 支持存款产生利息或紧急贷款。
    *   **道具店 (Shop)：** 使用现金或点券购买遥控骰子、路障等战略物资。
    *   **空地 (Empty Plot)：** 停留后可自由选择建设为“加油站”（强制停留）、“研究所”（产生道具）或“连锁店”。
*   **状态类：**
    *   **医院 (Hospital)：** 受伤（被地雷或飞弹击中）后的强制休养点。
    *   **法院 (Court)：** 触发负面新闻或违规后的禁足点。
*   **随机/运气类：**
    *   **新闻中心 (News)：** 触发全图生效的宏观事件（如：全体地价普涨、银行加息）。
    *   **神明格子 (Gods)：** 随机附身大财神、小财神（增益）或穷神、衰神（减益），持续若干回合。
*   **进阶策略类：**
    *   **股票交易所 (Stock Exchange)：** 购买区域股票，通过建设土地拉升股价实现资产增值。
    *   **传送门 (Portal)：** 地图上的快速通道，成对出现。
    *   **魔法屋 (Magic Shop)：** 对指定对手施加负面魔法（如倒退、转向）。

## 5. 核心经济机制
### 5.1 交易系统（Trading）
玩家之间可以随时发起交易。交易内容包括：
*   现金。
*   未抵押的土地所有权。
*   “出狱许可卡”。
*   *玩家可自由组合上述条件进行博弈。*

### 5.2 抵押与债务（Mortgage）
*   当玩家资金不足时，可以将土地抵押给银行换取现金（抵押状态的土地不收取租金）。
*   支付本金加利息可赎回抵押。
*   若抵押后仍无法偿债，则将所有资产转交给债权人并破产。

### 5.3 拍卖（Auction）
当玩家落位在无主土地但选择不购买时，该土地进入拍卖流程。所有玩家（包括拒绝购买的玩家）均可参与竞价，价高者得。

## 6. 联机特有交互
*   **角色选择：** 玩家可选择不同的 3D 模型或头像作为棋子。
*   **实时聊天：** 内置表情包或简易文字聊天，用于交易谈判或情感博弈。
*   **观战模式：** 破产后的玩家可选择继续留在房间观看比赛直到结束。

## 7. 游戏流程示例
1.  **开始阶段：** 玩家进入房间，房主点击开始，系统随机决定出手顺序。
2.  **经营阶段：** 玩家轮流掷骰，买地、收租、抽卡。
3.  **白热化阶段：** 棋盘土地被占满，玩家开始在同组土地上盖楼，租金激增。
4.  **终局阶段：** 资金较少的玩家开始抵押资产，最终因无法支付高昂租金而破产，最后幸存者获胜。

---
*参考项目：*
* [FatPaper-1874/fatpaper-monopoly](https://github.com/FatPaper-1874/fatpaper-monopoly)
* [lamarios/monopoly](https://github.com/lamarios/monopoly)
* [geeeeeeeeek/monopoly](https://github.com/geeeeeeeeek/monopoly)

